---
title: "biostat"
format: pdf
editor: visual
---

## Biostat (changer le nom)

Ce projet s'intéresse à une étude de la qualité de sommeil à partir de différentes informations.

## Importation du dataset

```{r}
install.packages("haven")
library(haven)
```

```{r}
dataSleep = read_xpt("SLQ_L.xpt")
dataDemo  = read_xpt("DEMO_L.xpt")
dataCigaretteUse = read_xpt("SMQ_L.xpt")
dataPhysicalActivity = read_xpt("PAQ_L.xpt")
dataIncome = read_xpt("INQ_L.xpt")
dataOccupation  =read_xpt("OCQ_L.xpt")
dataAlcohol = read_xpt("ALQ_L.xpt")
```

```{r}
data = merge(dataSleep, dataDemo, by.x = "SEQN", by.y = "SEQN")
data = merge(data, dataCigaretteUse, by.x = "SEQN", by.y = "SEQN")
data = merge(data, dataPhysicalActivity, by.x = "SEQN", by.y ="SEQN")
data = merge(data, dataIncome, by.x = "SEQN", by.y="SEQN")
data = merge(data, dataAlcohol,by.x = "SEQN", by.y="SEQN")
data = merge(data, dataOccupation,by.x = "SEQN", by.y="SEQN")
```

On retire des variables:

-   l'ethnicité, critère avant 2010

-   les informations sur la personne référente du foyer

```{r}
library(dplyr)
data = data[colSums(!is.na(data)) > 0]
remove_col_name = c('RIDEXMON', 'RIDRETH1', 'DMDHRAGZ', 'DMDHRGND')
data %>% select(-one_of(remove_col_name))

keepOnlyName = c('SEQN', 'SLD012','RIAGENDR', 'RIDAGEYR', 'INDFMMPI',  'PAD790Q', 'OCQ180', 'ALQ121')
data = select(data, keepOnlyName)
data = na.omit(data)
data = data[data$ALQ121<10 & data$PAD790Q<10 & data$OCQ180<81,]
mod = lm(data$SLD012 ~ data$RIAGENDR + data$RIDAGEYR + data$INDFMMPI + data$PAD790Q + data$OCQ180 + data$ALQ121, data = data)
View(mod)
summary(mod)



```

## Description des variables :

SEQN : numéro d'identification

<https://wwwn.cdc.gov/Nchs/Data/Nhanes/Public/2021/DataFiles/SLQ_L.htm>\
SLQ : 300, 310, heure de couché, levé en semaine\
SLD012 : nb d'heures de sommeil (dérivée de slq300 et slq310)\
de meme pour SLQ320, 330 et SLD013 mais pour le weekend

<https://wwwn.cdc.gov/Nchs/Data/Nhanes/Public/2021/DataFiles/SMQ_L.htm>\
SMQ020 : a fumé au moins 100 cigarettes dans sa vie\
SMQ040 : est-ce que vous fumer des cigarettes ?\
SMD641 : nb de jours parmis les 30 derniers à avoir fumé\
SMD650 : nb moyen de cigarette par jour\

## Analyse des données

à relfechir :quelles variables precisement on garde ?

```{r}
keepOnlyName = c('SEQN', 'SLD012','RIAGENDR', 'RIDAGEYR', 'INDFMMPI',  'PAD790Q', 'OCQ180', 'ALQ121')
data = select(data, keepOnlyName)
data = na.omit(data)
data = data[data$ALQ121<10 & data$PAD790Q<10 & data$OCQ180<81,]
mod = lm(data$SLD012 ~ data$RIAGENDR + data$RIDAGEYR + data$INDFMMPI + data$PAD790Q + data$OCQ180 + data$ALQ121, data = data)
mod = lm(data$SLD012 ~ data$RIAGENDR + data$RIDAGEYR + data$INDFMMPI + data$PAD790Q + data$OCQ180 + data$ALQ121, data = data)
summary(mod)
plot(data$OCQ180, data$SLD012 )
```
